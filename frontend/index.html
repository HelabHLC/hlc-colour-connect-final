
<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>ðŸŽ¯ HLC Colour Picker</title>
</head>
<body>
  <h1>ðŸŽ¨ HLC Colour Picker</h1>
  <input type="file" id="upload" accept="image/*"><br><br>
  <canvas id="canvas" style="border:1px solid black;"></canvas>
  <p>Klick ins Bild â€“ wir analysieren die Farbe</p>
  <div id="info">
    <p><strong>Name:</strong> <span id="name"></span></p>
    <p><strong>HEX:</strong> <span id="hex"></span></p>
    <p><strong>LAB:</strong> <span id="lab"></span></p>
  </div>
  <script>
    const upload = document.getElementById('upload');
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');

    upload.addEventListener('change', function(e) {
      const file = e.target.files[0];
      const img = new Image();
      img.onload = function() {
        canvas.width = img.width;
        canvas.height = img.height;
        ctx.drawImage(img, 0, 0);
      };
      img.src = URL.createObjectURL(file);
    });

    canvas.addEventListener('click', function(e) {
      const x = e.offsetX;
      const y = e.offsetY;
      const pixel = ctx.getImageData(x, y, 1, 1).data;
      const rgb = `${pixel[0]},${pixel[1]},${pixel[2]}`;
      fetch(`/api/match_rgb?rgb=${rgb}`)
        .then(response => response.json())
        .then(data => {
          document.getElementById('name').textContent = data.name || 'â€“';
          document.getElementById('hex').textContent = data.hex || 'â€“';
          document.getElementById('lab').textContent = data.lab || 'â€“';
        });
    });
  </script>
</body>
</html>
